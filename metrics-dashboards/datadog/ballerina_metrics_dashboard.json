{
  "title":"Ballerina Dashboard",
  "description":"This dashboard allows you to observe Ballerina components running in your Choreo private data planes.\nTo learn more about Choreo, visit https://wso2.com/choreo/.",
  "widgets":[
    {
      "id":2651286359519363,
      "definition":{
        "type":"image",
        "url":"https://ballerina.io/img/branding/ballerina_logo_dgrey_svg.svg",
        "sizing":"contain",
        "margin":"md",
        "has_background":false,
        "has_border":false,
        "vertical_align":"center",
        "horizontal_align":"center"
      },
      "layout":{
        "x":1,
        "y":0,
        "width":11,
        "height":2
      }
    },
    {
      "id":3341000510558349,
      "definition":{
        "type":"note",
        "content":"This dashboard allows you to observe Ballerina Application running in your instance or a kubernetes cluster.\n\nTo learn more about Ballerina, visit https://ballerina.io/.\n\n### NOTE: Select the correct values from the dropdown lists above to observe a component.\n",
        "background_color":"blue",
        "font_size":"14",
        "text_align":"left",
        "vertical_align":"top",
        "show_tick":false,
        "tick_pos":"50%",
        "tick_edge":"left",
        "has_padding":true
      },
      "layout":{
        "x":0,
        "y":2,
        "width":12,
        "height":2
      }
    },
    {
      "id":2400065784525538,
      "definition":{
        "title":"HTTP Service Metrics",
        "background_color":"blue",
        "show_title":true,
        "type":"group",
        "layout_type":"ordered",
        "widgets":[
          {
            "id":2682555360459536,
            "definition":{
              "title":"Requests / min",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ],
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, http_url:*, http_status_code_group:*}.as_count()",
                      "aggregator":"last"
                    }
                  ],
                  "response_format":"scalar"
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":true
                },
                "type":"area"
              }
            },
            "layout":{
              "x":0,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":7935688672172054,
            "definition":{
              "title":"Errors / min",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "response_format":"scalar",
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, http_url:*, http_status_code_group:5xx , http_status_code_group:4xx}.as_count()",
                      "aggregator":"avg"
                    }
                  ],
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ]
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":false
                },
                "type":"area"
              }
            },
            "layout":{
              "x":3,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":6172404345335368,
            "definition":{
              "title":"Inprogress Requests",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"auto",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ],
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.inprogress_requests_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, http_url:*}"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"dog_classic",
                    "order_by":"values",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":6,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":3646129142268226,
            "definition":{
              "title":"Error %",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "response_format":"scalar",
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, http_url:*, http_status_code_group:5xx , http_status_code_group:4xx}.as_count()",
                      "aggregator":"avg"
                    },
                    {
                      "data_source":"metrics",
                      "name":"query2",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, http_url:*, http_status_code_group:*}.as_count()",
                      "aggregator":"avg"
                    }
                  ],
                  "formulas":[
                    {
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"percent"
                        }
                      },
                      "formula":"default_zero(query1 / query2 * 100)"
                    }
                  ]
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":true
                },
                "type":"area"
              }
            },
            "layout":{
              "x":9,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":7523944539696268,
            "definition":{
              "title":"Throughput",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"horizontal",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "alias":"Success",
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"request",
                          "per_unit_name":"second"
                        }
                      },
                      "formula":"query1"
                    }
                  ],
                  "queries":[
                    {
                      "name":"query1",
                      "data_source":"metrics",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, http_status_code_group:2xx, $HTTP_Method, $HTTP_URL} by {http_status_code_group}.as_rate().fill(linear)"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"green",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                },
                {
                  "formulas":[
                    {
                      "alias":"Error",
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"request",
                          "per_unit_name":"second"
                        }
                      },
                      "formula":"query0"
                    }
                  ],
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query0",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, http_status_code_group:5xx, $HTTP_Method, $HTTP_URL} by {http_status_code_group}.as_rate().fill(linear)"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"red",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":0,
              "y":2,
              "width":6,
              "height":3
            }
          },
          {
            "id":3463676832755062,
            "definition":{
              "title":"Response Time Percentiles",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"horizontal",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "alias":"Max",
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"millisecond"
                        }
                      },
                      "formula":"default_zero(default_zero(query1) * 1000)"
                    }
                  ],
                  "queries":[
                    {
                      "name":"query1",
                      "data_source":"metrics",
                      "query":"max:ballerina.response_time_seconds_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, $HTTP_Method, http_url:*, $HTTP_URL} by {http_url}"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"datadog16",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":6,
              "y":2,
              "width":6,
              "height":3
            }
          },
          {
            "id":4884045228635276,
            "definition":{
              "title":"Top 5 Services",
              "title_size":"16",
              "title_align":"left",
              "type":"toplist",
              "requests":[
                {
                  "queries":[
                    {
                      "name":"query1",
                      "data_source":"metrics",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, $HTTP_Method, $HTTP_URL, src_service_resource:true} by {http_url}.as_count().fill(linear)",
                      "aggregator":"avg"
                    }
                  ],
                  "response_format":"scalar",
                  "formulas":[
                    {
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"request",
                          "per_unit_name":"second"
                        }
                      },
                      "formula":"default_zero(query1)"
                    }
                  ],
                  "sort":{
                    "count":5,
                    "order_by":[
                      {
                        "type":"formula",
                        "index":0,
                        "order":"desc"
                      }
                    ]
                  }
                }
              ],
              "style":{
                "display":{
                  "type":"stacked",
                  "legend":"inline"
                },
                "palette":"green"
              }
            },
            "layout":{
              "x":0,
              "y":5,
              "width":6,
              "height":3
            }
          }
        ]
      },
      "layout":{
        "x":0,
        "y":4,
        "width":12,
        "height":9
      }
    },
    {
      "id":5808796119944014,
      "definition":{
        "title":"HTTP Client Metrics",
        "background_color":"blue",
        "show_title":true,
        "type":"group",
        "layout_type":"ordered",
        "widgets":[
          {
            "id":4092911027020852,
            "definition":{
              "title":"Requests / min",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ],
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0 ,src_object_name:ballerina/http/httpclient}.as_count()",
                      "aggregator":"last"
                    }
                  ],
                  "response_format":"scalar"
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":true
                },
                "type":"area"
              }
            },
            "layout":{
              "x":0,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":7893499348301922,
            "definition":{
              "title":"Errors / min",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "response_format":"scalar",
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0 ,src_object_name:ballerina/http/httpclient ,error:true}.as_count()",
                      "aggregator":"avg"
                    }
                  ],
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ]
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":false
                },
                "type":"area"
              }
            },
            "layout":{
              "x":3,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":5043835760835244,
            "definition":{
              "title":"Inprogress Requests",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"auto",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ],
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.inprogress_requests_value{!entrypoint_service_name:ballerinax_prometheus_svc_0 , src_object_name:ballerina/http/httpclient}"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"dog_classic",
                    "order_by":"values",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":6,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":8847839795202732,
            "definition":{
              "title":"Error %",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "response_format":"scalar",
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, src_object_name:ballerina/http/httpclient , error:true}.as_count()",
                      "aggregator":"avg"
                    },
                    {
                      "data_source":"metrics",
                      "name":"query2",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0 , src_object_name:ballerina/http/httpclient}.as_count()",
                      "aggregator":"avg"
                    }
                  ],
                  "formulas":[
                    {
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"percent"
                        }
                      },
                      "formula":"default_zero(query1 / query2 * 100)"
                    }
                  ]
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":true
                },
                "type":"area"
              }
            },
            "layout":{
              "x":9,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":2036676371012144,
            "definition":{
              "title":"Throughput",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"horizontal",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "alias":"Success",
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"request",
                          "per_unit_name":"second"
                        }
                      },
                      "formula":"query1"
                    }
                  ],
                  "queries":[
                    {
                      "name":"query1",
                      "data_source":"metrics",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0 , src_object_name:ballerina/http/httpclient} by {http_status_code_group}.as_rate().fill(linear)"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"green",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":0,
              "y":2,
              "width":6,
              "height":3
            }
          },
          {
            "id":1778655315903430,
            "definition":{
              "title":"Response Time Percentiles",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"horizontal",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "alias":"Max",
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"millisecond"
                        }
                      },
                      "formula":"default_zero(query1) * 1000"
                    }
                  ],
                  "queries":[
                    {
                      "name":"query1",
                      "data_source":"metrics",
                      "query":"max:ballerina.response_time_seconds_value{!entrypoint_service_name:ballerinax_prometheus_svc_0, $HTTP_Method, src_object_name:ballerina/http/httpclient} by {entrypoint_service_name}"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"datadog16",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":6,
              "y":2,
              "width":6,
              "height":3
            }
          }
        ]
      },
      "layout":{
        "x":0,
        "y":13,
        "width":12,
        "height":6
      }
    },
    {
      "id":1457225639590526,
      "definition":{
        "title":"SQL Client Metrics",
        "background_color":"blue",
        "show_title":true,
        "type":"group",
        "layout_type":"ordered",
        "widgets":[
          {
            "id":4168475438990970,
            "definition":{
              "title":"Requests / min",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ],
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0,src_object_name:ballerinax/postgresql/client}.as_count()",
                      "aggregator":"last"
                    }
                  ],
                  "response_format":"scalar"
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":true
                },
                "type":"area"
              }
            },
            "layout":{
              "x":0,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":2279689317414104,
            "definition":{
              "title":"Errors / min",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "response_format":"scalar",
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0,src_object_name:ballerinax/postgresql/client , error:true}.as_count()",
                      "aggregator":"avg"
                    }
                  ],
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ]
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":false
                },
                "type":"area"
              }
            },
            "layout":{
              "x":3,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":2264818358385220,
            "definition":{
              "title":"Inprogress Requests",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"auto",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "formula":"default_zero(query1)"
                    }
                  ],
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.inprogress_requests_value{!entrypoint_service_name:ballerinax_prometheus_svc_0,src_object_name:ballerinax/postgresql/Client}"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"dog_classic",
                    "order_by":"values",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":6,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":8817411067466718,
            "definition":{
              "title":"Error %",
              "title_size":"16",
              "title_align":"left",
              "type":"query_value",
              "requests":[
                {
                  "response_format":"scalar",
                  "queries":[
                    {
                      "data_source":"metrics",
                      "name":"query1",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0,src_object_name:ballerinax/postgresql/client,error:true}.as_count()",
                      "aggregator":"avg"
                    },
                    {
                      "data_source":"metrics",
                      "name":"query2",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0,src_object_name:ballerinax/postgresql/client}.as_count()",
                      "aggregator":"avg"
                    }
                  ],
                  "formulas":[
                    {
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"percent"
                        }
                      },
                      "formula":"default_zero(query1 / query2 * 100)"
                    }
                  ]
                }
              ],
              "autoscale":true,
              "precision":0,
              "timeseries_background":{
                "yaxis":{
                  "include_zero":true
                },
                "type":"area"
              }
            },
            "layout":{
              "x":9,
              "y":0,
              "width":3,
              "height":2
            }
          },
          {
            "id":5635672588829980,
            "definition":{
              "title":"Throughput",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"horizontal",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "alias":"Success",
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"request",
                          "per_unit_name":"second"
                        }
                      },
                      "formula":"query1"
                    }
                  ],
                  "queries":[
                    {
                      "name":"query1",
                      "data_source":"metrics",
                      "query":"sum:ballerina.requests_total_value{!entrypoint_service_name:ballerinax_prometheus_svc_0 , src_object_name:ballerinax/postgresql/client}.as_rate().fill(linear)"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"green",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":0,
              "y":2,
              "width":6,
              "height":3
            }
          },
          {
            "id":3510529341287088,
            "definition":{
              "title":"Response Time Percentiles",
              "title_size":"16",
              "title_align":"left",
              "show_legend":true,
              "legend_layout":"horizontal",
              "legend_columns":[
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type":"timeseries",
              "requests":[
                {
                  "formulas":[
                    {
                      "number_format":{
                        "unit":{
                          "type":"canonical_unit",
                          "unit_name":"millisecond"
                        }
                      },
                      "alias":"Max",
                      "formula":"default_zero(query1) * 1000"
                    }
                  ],
                  "queries":[
                    {
                      "name":"query1",
                      "data_source":"metrics",
                      "query":"max:ballerina.response_time_seconds_value{!entrypoint_service_name:ballerinax_prometheus_svc_0 , src_object_name:ballerinax/postgresql/client} by {entrypoint_service_name}"
                    }
                  ],
                  "response_format":"timeseries",
                  "style":{
                    "palette":"datadog16",
                    "line_type":"solid",
                    "line_width":"normal"
                  },
                  "display_type":"area"
                }
              ]
            },
            "layout":{
              "x":6,
              "y":2,
              "width":6,
              "height":3
            }
          }
        ]
      },
      "layout":{
        "x":0,
        "y":19,
        "width":12,
        "height":6
      }
    }
  ],
  "template_variables":[
    {
      "name":"Environment",
      "prefix":"env",
      "available_values":[

      ],
      "default":"*"
    },
    {
      "name":"Component",
      "prefix":"service",
      "available_values":[

      ],
      "default":"*"
    },
    {
      "name":"HTTP_Method",
      "prefix":"http_method",
      "available_values":[

      ],
      "default":"*"
    },
    {
      "name":"HTTP_URL",
      "prefix":"http_url",
      "available_values":[

      ],
      "default":"*"
    }
  ],
  "layout_type":"ordered",
  "notify_list":[

  ],
  "reflow_type":"fixed"
}
